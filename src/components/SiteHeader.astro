---
import { services } from "../data/services";
import { serviceAreas } from "../data/service-areas";
---

<header
  class="border-cf-borderSubtle via-cf-card/95 sticky top-0 z-40 border-b bg-gradient-to-b from-white/95 to-white/95 shadow-sm backdrop-blur"
>
  <div
    class="mx-auto flex max-w-6xl items-center justify-between gap-4 px-4 py-4"
  >
    <a href="/" class="flex items-center gap-3">
      <div
        class="bg-cf-card flex h-12 w-12 items-center justify-center overflow-hidden rounded-full sm:h-14 sm:w-14"
      >
        <picture>
          <source
            srcset="
              /images/logo/logo-small.webp 1x,
              /images/logo/logo-medium.webp 2x,
              /images/logo/logo-large.webp 3x
            "
            type="image/webp"
          />
          <source
            srcset="
              /images/logo/logo-small.png 1x,
              /images/logo/logo-medium.png 2x,
              /images/logo/logo-large.png 3x
            "
            type="image/png"
          />
          <img
            src="/images/logo/logo-medium.png"
            alt="Carlsbad Fix It"
            class="h-full w-full object-contain"
            loading="eager"
            fetchpriority="high"
          />
        </picture>
      </div>
      <div class="flex flex-col leading-tight">
        <span
          class="text-cf-text text-sm font-semibold tracking-tight md:text-base"
        >
          Carlsbad Fix It
        </span>
        <span class="text-cf-textMuted text-[11px] md:text-xs">
          Local handyman in Carlsbad, CA
        </span>
      </div>
    </a>

    <div class="flex items-center gap-3">
      <nav class="hidden items-center gap-6 md:flex">
        <div class="group relative" data-dropdown="services">
          <a
            href="/services/"
            aria-haspopup="true"
            aria-expanded="false"
            aria-controls="services-menu"
            data-dropdown-trigger
            class="text-cf-text hover:text-cf-accentBlue focus-visible:ring-cf-accentBlue/30 inline-flex items-center gap-1 text-sm font-medium transition-colors focus:outline-none focus-visible:rounded-full focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-offset-white"
          >
            <span>Services</span>
            <span
              class="inline-flex h-4 w-4 items-center justify-center text-[10px]"
            >
              ▾
            </span>
          </a>
          <div
            id="services-menu"
            class="absolute top-full left-0 z-20 hidden pt-2 group-focus-within:block group-hover:block group-data-[open=true]:block"
            data-dropdown-menu
          >
            <div
              class="border-cf-borderSubtle text-cf-text w-56 rounded-xl border bg-white/95 p-2 text-xs shadow-lg"
            >
              <ul class="space-y-0.5">
                {
                  services.map((service) => (
                    <li>
                      <a
                        href={`/services/${service.slug}/`}
                        class="text-cf-text hover:bg-cf-sandSoft hover:text-cf-text block rounded-lg px-3 py-1.5 text-xs"
                      >
                        {service.name}
                      </a>
                    </li>
                  ))
                }
              </ul>
            </div>
          </div>
        </div>

        <div class="group relative" data-dropdown="service-areas">
          <a
            href="/service-areas/"
            aria-haspopup="true"
            aria-expanded="false"
            aria-controls="service-areas-menu"
            data-dropdown-trigger
            class="text-cf-text hover:text-cf-accentBlue focus-visible:ring-cf-accentBlue/30 inline-flex items-center gap-1 text-sm font-medium transition-colors focus:outline-none focus-visible:rounded-full focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-offset-white"
          >
            <span>Service areas</span>
            <span
              class="inline-flex h-4 w-4 items-center justify-center text-[10px]"
            >
              ▾
            </span>
          </a>
          <div
            id="service-areas-menu"
            class="absolute top-full left-0 z-20 hidden pt-2 group-focus-within:block group-hover:block group-data-[open=true]:block"
            data-dropdown-menu
          >
            <div
              class="border-cf-borderSubtle text-cf-text w-64 rounded-xl border bg-white/95 p-2 text-xs shadow-lg"
            >
              <ul class="space-y-0.5">
                {
                  serviceAreas.map((area) => (
                    <li>
                      <a
                        href={`/service-areas/${area.slug}/`}
                        class="text-cf-text hover:bg-cf-sandSoft hover:text-cf-text block rounded-lg px-3 py-1.5 text-xs"
                      >
                        {area.label}
                      </a>
                    </li>
                  ))
                }
              </ul>
            </div>
          </div>
        </div>

        <a
          href="/about/"
          class="text-cf-text hover:text-cf-accentBlue text-sm font-medium transition-colors"
        >
          About
        </a>
        <a
          href="/faq/"
          class="text-cf-text hover:text-cf-accentBlue text-sm font-medium transition-colors"
        >
          FAQ
        </a>
        <a
          href="/blog/"
          class="text-cf-text hover:text-cf-accentBlue text-sm font-medium transition-colors"
        >
          Blog
        </a>
        <a
          href="/contact/"
          class="text-cf-text hover:text-cf-accentBlue text-sm font-medium transition-colors"
        >
          Contact
        </a>
      </nav>

      <div class="hidden items-center gap-3 md:flex">
        <a
          href="tel:+18082266681"
          data-ga-call="true"
          data-ga-location="header_desktop"
          data-ga-event="call_click"
          data-ga-label="site_phone"
          class="bg-cf-accentBlue hover:bg-cf-accentBlue/90 inline-flex h-10 items-center rounded-full px-4 text-sm font-semibold text-white shadow-sm"
        >
          (808) 226-6681
        </a>
        <a
          href="/contact/"
          class="btn-primary h-10 text-sm"
          data-ga-event="request_quote_click"
          data-ga-label="header_cta"
        >
          Request a quote
        </a>
      </div>

      <details class="relative md:hidden">
        <summary
          class="border-cf-borderSubtle text-cf-text flex cursor-pointer items-center gap-2 rounded-full border bg-white px-3 py-1.5 text-xs font-medium shadow-sm"
        >
          <span class="sr-only">Toggle navigation</span>
          <span class="flex h-4 w-4 flex-col justify-between">
            <span class="bg-cf-text h-[2px] w-full rounded-full"></span>
            <span class="bg-cf-text h-[2px] w-full rounded-full"></span>
            <span class="bg-cf-text h-[2px] w-full rounded-full"></span>
          </span>
          <span>Menu</span>
        </summary>
        <div
          class="text-cf-text ring-cf-borderSubtle absolute right-0 mt-3 w-64 rounded-2xl bg-white p-3 text-sm shadow-xl ring-1"
        >
          <div class="border-cf-borderSubtle mb-3 border-b pb-3">
            <p
              class="text-cf-textMuted text-xs font-semibold tracking-wide uppercase"
            >
              Services
            </p>
            <ul class="mt-2 space-y-1">
              {
                services.map((service) => (
                  <li>
                    <a
                      href={`/services/${service.slug}/`}
                      class="text-cf-text hover:bg-cf-sandSoft block rounded-lg px-3 py-1.5 text-sm"
                    >
                      {service.name}
                    </a>
                  </li>
                ))
              }
            </ul>
          </div>

          <div class="border-cf-borderSubtle mb-3 border-b pb-3">
            <p
              class="text-cf-textMuted text-xs font-semibold tracking-wide uppercase"
            >
              Service areas
            </p>
            <ul class="mt-2 space-y-1">
              {
                serviceAreas.map((area) => (
                  <li>
                    <a
                      href={`/service-areas/${area.slug}/`}
                      class="text-cf-text hover:bg-cf-sandSoft block rounded-lg px-3 py-1.5 text-sm"
                    >
                      {area.label}
                    </a>
                  </li>
                ))
              }
            </ul>
          </div>

          <div class="border-cf-borderSubtle mb-3 space-y-1 border-b pb-3">
            <a
              href="/about/"
              class="text-cf-text hover:bg-cf-sandSoft block rounded-lg px-3 py-1.5 text-sm"
            >
              About
            </a>
            <a
              href="/faq/"
              class="text-cf-text hover:bg-cf-sandSoft block rounded-lg px-3 py-1.5 text-sm"
            >
              FAQ
            </a>
            <a
              href="/blog/"
              class="text-cf-text hover:bg-cf-sandSoft block rounded-lg px-3 py-1.5 text-sm"
            >
              Blog
            </a>
            <a
              href="/contact/"
              class="text-cf-text hover:bg-cf-sandSoft block rounded-lg px-3 py-1.5 text-sm"
            >
              Contact
            </a>
          </div>

          <div class="space-y-2">
            <a
              href="tel:+18082266681"
              data-ga-call="true"
              data-ga-location="header_mobile"
              data-ga-event="call_click"
              data-ga-label="site_phone"
              class="text-cf-textMuted block text-xs font-medium"
            >
              Call or text (808) 226-6681
            </a>
            <a href="/contact/" class="btn-primary block text-center text-xs">
              Request a quote
            </a>
          </div>
        </div>
      </details>
    </div>
  </div>
</header>
