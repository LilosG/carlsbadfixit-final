---
import { services } from "../data/services";
import { serviceAreas } from "../data/service-areas";
---
<header class="sticky top-0 z-40 border-b border-cf-borderSubtle bg-gradient-to-b from-white/95 via-cf-card/95 to-white/95 shadow-sm backdrop-blur">
  <div class="mx-auto flex max-w-6xl items-center justify-between gap-4 px-4 py-4">
    <a href="/" class="flex items-center gap-3">
      <div class="flex h-11 w-11 items-center justify-center overflow-hidden rounded-full bg-cf-card sm:h-12 sm:w-12">
        <picture>
          <source
            srcset="
              /images/logo/logo-small.webp 1x,
              /images/logo/logo-medium.webp 2x,
              /images/logo/logo-large.webp 3x
            "
            type="image/webp"
          />
          <source
            srcset="
              /images/logo/logo-small.png 1x,
              /images/logo/logo-medium.png 2x,
              /images/logo/logo-large.png 3x
            "
            type="image/png"
          />
          <img
            src="/images/logo/logo-medium.png"
            alt="Carlsbad Fix It"
            class="h-full w-full object-contain"
            loading="eager"
            fetchpriority="high"
          />
        </picture>
      </div>
      <div class="flex flex-col">
        <span class="text-sm font-semibold tracking-tight text-cf-text">
          Carlsbad Fix It
        </span>
        <span class="text-xs text-cf-textMuted">
          Local handyman in Carlsbad, CA
        </span>
      </div>
    </a>

    <div class="flex items-center gap-3">
      <nav class="hidden items-center gap-6 text-sm font-medium text-cf-textMuted md:flex">
        <div class="relative group">
          <button
            type="button"
            class="inline-flex items-center gap-1 text-sm font-medium text-cf-textMuted hover:text-cf-accentBlue"
          >
            <span>Services</span>
            <span class="inline-flex h-4 w-4 items-center justify-center text-[10px]">
              ▾
            </span>
          </button>
          <div
            class="invisible absolute left-0 top-full z-20 mt-3 w-56 rounded-2xl bg-white p-3 text-sm text-cf-text opacity-0 shadow-xl ring-1 ring-cf-borderSubtle transition group-hover:visible group-hover:opacity-100 group-focus-within:visible group-focus-within:opacity-100"
          >
            <ul class="space-y-1">
              {services.map((service) => (
                <li>
                  <a
                    href={`/services/${service.slug}/`}
                    class="block rounded-lg px-3 py-2 text-sm text-cf-text hover:bg-cf-sandSoft hover:text-cf-text"
                  >
                    {service.name}
                  </a>
                </li>
              ))}
            </ul>
          </div>
        </div>

        <div class="relative group">
          <button
            type="button"
            class="inline-flex items-center gap-1 text-sm font-medium text-cf-textMuted hover:text-cf-accentBlue"
          >
            <span>Service areas</span>
            <span class="inline-flex h-4 w-4 items-center justify-center text-[10px]">
              ▾
            </span>
          </button>
          <div
            class="invisible absolute left-0 top-full z-20 mt-3 w-64 rounded-2xl bg-white p-3 text-sm text-cf-text opacity-0 shadow-xl ring-1 ring-cf-borderSubtle transition group-hover:visible group-hover:opacity-100 group-focus-within:visible group-focus-within:opacity-100"
          >
            <ul class="space-y-1">
              {serviceAreas.map((area) => (
                <li>
                  <a
                    href={`/service-areas/${area.slug}/`}
                    class="block rounded-lg px-3 py-2 text-sm text-cf-text hover:bg-cf-sandSoft hover:text-cf-text"
                  >
                    {area.label}
                  </a>
                </li>
              ))}
            </ul>
          </div>
        </div>

        <a href="/about/" class="hover:text-cf-accentBlue">
          About
        </a>
        <a href="/faq/" class="hover:text-cf-accentBlue">
          FAQ
        </a>
        <a href="/contact/" class="hover:text-cf-accentBlue">
          Contact
        </a>
      </nav>

      <div class="hidden items-center gap-3 md:flex">
        <a
          href="tel:+18082266681"
          class="text-xs font-medium text-cf-textMuted"
        >
          (808) 226-6681
        </a>
        <a href="/contact/" class="btn-primary text-xs">
          Request a quote
        </a>
      </div>

      <details class="relative md:hidden">
        <summary class="flex cursor-pointer items-center gap-2 rounded-full border border-cf-borderSubtle bg-white px-3 py-1.5 text-xs font-medium text-cf-text shadow-sm">
          <span class="sr-only">Toggle navigation</span>
          <span class="flex h-4 w-4 flex-col justify-between">
            <span class="h-[2px] w-full rounded-full bg-cf-text"></span>
            <span class="h-[2px] w-full rounded-full bg-cf-text"></span>
            <span class="h-[2px] w-full rounded-full bg-cf-text"></span>
          </span>
          <span>Menu</span>
        </summary>
        <div
          class="absolute right-0 mt-3 w-64 rounded-2xl bg-white p-3 text-sm text-cf-text shadow-xl ring-1 ring-cf-borderSubtle"
        >
          <div class="mb-3 border-b border-cf-borderSubtle pb-3">
            <p class="text-xs font-semibold uppercase tracking-wide text-cf-textMuted">
              Services
            </p>
            <ul class="mt-2 space-y-1">
              {services.map((service) => (
                <li>
                  <a
                    href={`/services/${service.slug}/`}
                    class="block rounded-lg px-3 py-1.5 text-sm text-cf-text hover:bg-cf-sandSoft"
                  >
                    {service.name}
                  </a>
                </li>
              ))}
            </ul>
          </div>

          <div class="mb-3 border-b border-cf-borderSubtle pb-3">
            <p class="text-xs font-semibold uppercase tracking-wide text-cf-textMuted">
              Service areas
            </p>
            <ul class="mt-2 space-y-1">
              {serviceAreas.map((area) => (
                <li>
                  <a
                    href={`/service-areas/${area.slug}/`}
                    class="block rounded-lg px-3 py-1.5 text-sm text-cf-text hover:bg-cf-sandSoft"
                  >
                    {area.label}
                  </a>
                </li>
              ))}
            </ul>
          </div>

          <div class="mb-3 border-b border-cf-borderSubtle pb-3 space-y-1">
            <a
              href="/about/"
              class="block rounded-lg px-3 py-1.5 text-sm text-cf-text hover:bg-cf-sandSoft"
            >
              About
            </a>
            <a
              href="/faq/"
              class="block rounded-lg px-3 py-1.5 text-sm text-cf-text hover:bg-cf-sandSoft"
            >
              FAQ
            </a>
            <a
              href="/contact/"
              class="block rounded-lg px-3 py-1.5 text-sm text-cf-text hover:bg-cf-sandSoft"
            >
              Contact
            </a>
          </div>

          <div class="space-y-2">
            <a
              href="tel:+18082266681"
              class="block text-xs font-medium text-cf-textMuted"
            >
              Call or text (808) 226-6681
            </a>
            <a href="/contact/" class="btn-primary block text-center text-xs">
              Request a quote
            </a>
          </div>
        </div>
      </details>
    </div>
  </div>
</header>
